<%- include('base', { content: `
    <style>
      body {
        background-color: #121212;
        color: #e0e0e0;
      }
      .blog-card {
        max-width: 800px;
        margin: 20px auto;
        background-color: #1e1e1e;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        overflow: hidden;
      }
      .cover-image {
        width: 100%;
        height: 300px;
        object-fit: cover;
      }
      .blog-content {
        padding: 20px;
      }
      .blog-title {
        font-size: 28px;
        margin-bottom: 10px;
        color: #ffffff;
      }
      .blog-date {
        color: #b0b0b0;
        margin-bottom: 15px;
      }
      .blog-description {
        line-height: 1.6;
      }
      .author {
        display: flex;
        align-items: center;
        margin-top: 20px;
        background-color: #2a2a2a;
        padding: 10px;
        border-radius: 8px;
      }
      .author img {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 15px;
        border: 2px solid #4a4a4a;
      }
      .author-info {
        display: flex;
        flex-direction: column;
      }
      .author-name {
        font-weight: bold;
        color: #ffffff;
      }
      .author-title {
        color: #b0b0b0;
        font-size: 0.9em;
      }
      .comments-section {
        margin-top: 30px;
        background-color: #1e1e1e;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      }
      .comments-title {
        font-size: 24px;
        margin-bottom: 20px;
        color: #ffffff;
      }
      .comment {
        display: flex;
        margin-bottom: 20px;
        background-color: #2a2a2a;
        padding: 15px;
        border-radius: 8px;
        transition: transform 0.2s ease;
      }
      .comment:hover {
        transform: translateY(-5px);
      }
      .comment-pfp {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 15px;
        border: 2px solid #4a4a4a;
      }
      .comment-content {
        flex-grow: 1;
      }
      .comment-author {
        font-weight: bold;
        color: #ffffff;
      }
      .comment-date {
        color: #b0b0b0;
        font-size: 0.9em;
      }
      .comment-text {
        margin-top: 10px;
        white-space: pre-wrap;
      }
      .comment-form {
        margin-top: 20px;
      }
      .comment-form input {
        width: 100%;
        padding: 10px;
        border: none;
        border-radius: 4px;
        background-color: #2a2a2a;
        color: #e0e0e0;
        margin-bottom: 10px;
      }
      .comment-form button {
        padding: 10px 20px;
        background-color: #4a4a4a;
        color: #ffffff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s ease;
      }
      .comment-form button:hover {
        background-color: #5a5a5a;
      }
    </style>
    
    <div class="blog-card">
      ${blog.coverImage ? `<img src="${blog.coverImage}" alt="Blog post cover" class="cover-image" />` : ''}
      <div class="blog-content">
        <h1 class="blog-title">${blog.title || 'Untitled'}</h1>
        <div class="blog-date">
          ${blog.createdAt ? new Date(blog.createdAt).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) : 'Date unknown'}
        </div>
        <p class="blog-description">${blog.body || 'No content available'}</p>
        <div class="author">
          ${blog.createdBy && blog.createdBy.profileImageURL ? 
            `<img src="${blog.createdBy.profileImageURL}" alt="Author" />` : 
            '<img src="/default-profile.jpg" alt="Default Author Image" />'}
          <div class="author-info">
            <span class="author-name">${blog.createdBy && blog.createdBy.fullName ? blog.createdBy.fullName : 'Unknown Author'}</span>
            <span class="author-title">Author</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="comments-section">
      <h2 class="comments-title">Comments (${comments ? comments.length : 0})</h2>
      ${comments ? comments.map(comment => `
        <div class="comment">
          ${comment.createdBy && comment.createdBy.profileImageURL ? 
            `<img src="${comment.createdBy.profileImageURL}" alt="Commenter" class="comment-pfp" />` :
            '<img src="/default-profile.jpg" alt="Default Commenter Image" class="comment-pfp" />'}
          <div class="comment-content">
            <div class="comment-author">${comment.createdBy && comment.createdBy.fullName ? comment.createdBy.fullName : 'Anonymous'}</div>
            <div class="comment-date">
              ${comment.createdAt ? new Date(comment.createdAt).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) : 'Date unknown'}
            </div>
            <p class="comment-text">${comment.content || 'No content'}</p>
          </div>
        </div>
      `).join('') : '<p>No comments yet. Be the first to comment!</p>'}
      ${user ? `
        <div class="comment-form">
          <form action="/blog/comment/${blog._id}" method="post">
            <input class="comment-placeholder" type="text" name="content" placeholder="Share your thoughts..." />
            <button type="submit">Post Comment</button>
          </form>
        </div>
      ` : ''}
    </div>
    ` }) %>